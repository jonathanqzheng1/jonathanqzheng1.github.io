<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Idiom Translation Annotation Tutorial</title>
    <script src="https://code.jquery.com/jquery-3.5.1.js"
        integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://unpkg.com/vue-form-wizard/dist/vue-form-wizard.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.min.js"></script>
    <script src="https://kit.fontawesome.com/c3b36ffc0c.js" crossorigin="anonymous"></script>

    <script src="../js/leader-line.min.js"></script>

    <!-- <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore-compat.js"></script> -->

    <link rel="stylesheet" href="https://unpkg.com/vue-form-wizard/dist/vue-form-wizard.min.css">
    <link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/selection.css">
    <link rel="stylesheet" href="../css/button.css">
    <link rel="stylesheet" href="../css/select_box.css">
    <link rel="stylesheet" href="../css/qual.css">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
</head>

<!-- https://github.com/BinarCode/vue-form-wizard/issues/27 -->

<body class="sans-serif">
    <div id="app">
        <form-wizard 
            :hide-buttons="true" 
            @on-complete="onComplete" 
            @on-change="onChange" 
            next-button-text="Next" 
            back-button-text="Back" 
            finish-button-text="Finish"
            title="Neologism Translation Annotation Main Study"
            ref="wizard"
            subtitle="">
            
            <tab-content title="Introduction">
                <h1>Introduction</h1>
                <p>
                    Welcome to the neologism translation annotation.
                </p>

                <p>
                    You are selected for because of the similarity to the idiom translation annotation study you did. 
                </p>

                <h2>Overview</h2>

                <ul>
                    <li>
                        A neologism is a new word, word form, or phrase that has come into usage recently. The main study contains batches of translations of sentences that contain neologisms and similar sentences without neologisms. 
                        We will release each series one by one. This is the first series of studies. For sentences with neologisms, the definition will be provided.
                    </li>
                    <li>
                        There are 4 batches of translation pairs and you need to finish annotating all of them. Each batch represents a different machine translation system of the same set of sentences.
                        In other words, you need to submit 4 times on 4 different Thresh pages.
                    </li>
                </ul>


            </tab-content>

            <tab-content title="Translation Annotation">
                <h1>Translation Categories</h1>
                <p>
                    <b><span style="color:#f5070f">Please read the annotation categories below carefully since they are slightly different from idiom translation. Translation of neologisms sentences means evaluating the quality of the overall sentence, not just the neologism itself.</span></b>
                </p>

                <p><span style="background-color:#c8e5c4">Fluent</span> 
                    - Translation is of good quality. The translation correctly conveys the underlying meaning of the sentence. This means that English phrases are translated correctly into Chinese, and the neologismâ€™s meaning makes sense in Mandarin.  
                </p>

                <p><span style="background-color:#eba4a2">Incomprehensible</span> 
                    - The entire translated is completely incoherent. While mistranslations may affect the understanding of the sentence, this category details a complete failure to capture any meaning of the original sentence.                      
                </p>
                
                <p><span style="background-color:#cc9900">Mistranslation</span> 
                    - Translation of sentence is incorrect which leads to poor understanding of the overall meaning of the sentence. Neologism translation is incorrect due to wrong choices of words, which affects the understanding of the sentence.
                    Based on the this, we have the following subcategories:
                    <ul>
                        <li>
                            <b>Neologism:</b>
                            Neologism is mistranslated.
                        </li>
                        <li>
                            <b>Remaining Sequence:</b>
                            The part of the sentence that is not the neologism is mistranslated. 
                        </li>
                    </ul>
                </p>
                
                <p> <span style="background-color:#e6e6e6">Unnatural</span> 
                    - The translation of the sequence is imperfect as there are grammatical errors in the sequence. However, the overall meaning of the sentence is understood.
                </p>

                <p><span style="background-color:#cc00cc">Literal Translation</span> 
                    - For neologisms that use slang and existing words, the translation is literal and not coherent with meaning in Chinese. The correct translation conveys the meaning of the neologism, which is not captured with the literal translation.
                </p>

                <p><span style="background-color:#ff6600">Partial Translation</span> 
                    - Sentence is partially translated. The remaining sequence is left out and the sentence ends abruptly without conveying all information.
                </p>


                <p><span style="background-color:#0066ff">No Translation</span> 
                    - - There is an unstranslated sequence that is left as English in the Chinese sentence.
                    <b>Note: for the two words SPAC and DBT, they can be left as English.</b>
                    Based on the this, we have the following subcategories:

                    <ul>
                        <li>
                            <b>Neologism:</b>
                            Neologism is left out in English.
                        </li>
                        <li>
                            <b>Remaining Sequence:</b>
                            The part of the sentence that is not the neologism is left out as English. 
                        </li>
                    </ul>
                </p>                

                <p> <span style="background-color:#ebd256">More than one error category</span> 
                    - Presence of more than one error types. <b><span style="color:#f5070f">You need to write down what error types there are!</span></b>
                </p>

            </tab-content>
            
            <tab-content title="Prolific Information">
                
                <div class="container card mb-3 card-body" id="bodyDemographics">
                    <p class="mt0 f2 b">Prolific Information</p>
  
                    <p class="f4">
                        This page pre-fills your Prolific information, 
                        including Prolific ID, Study ID and Session ID.
                    </p>
                    
                    <ul >
                        <li style="margin: 10px 0">
                            Prolific ID:  <input id='pro-id-input' type="text" name="prolific-id" size="30" readonly>
                        </li>
                        <li style="margin: 10px 0">
                            Study ID:  <input id='sty-id-input' type="text" name="study-id" size="30" readonly>
                        </li>
                        <li style="margin: 10px 0">
                            Session ID:  <input id='ses-id-input' type="text" name="sessionn-id" size="30" readonly>
                        </li>
                        
                    </ul>


                </div>
            </tab-content>

<!--             <tab-content title="Main Study Part 1">
                
                <p>
                    Let's now do the actual study. The study will be open in a new tab after you click the link below.
                    In the end, click <i>Submit</i> button to submit your annotations. 
                </p>
                <p>
                    After submission, you will be redirected to prolific with a completion code.
                </p>
                <p>
                    <b>Note: this is part 1 out of 5 for the current series! You need to come back to resume after submission.</b>
                </p>

                <a target="_blank" id="main_study_p1">Click to start your part 1 annotation!</a> 
                
            </tab-content>

            <tab-content title="Main Study Part 2">

                <b>Note: this is part 2 out of 5 for the current series!</b>

                <br><br>

                <a target="_blank" id="main_study_p2">Click to start your part 2 annotation!</a> 
                
            </tab-content>

            <tab-content title="Main Study Part 3">

                <b>Note: this is part 3 out of 5 for the current series!</b>

                <br><br>

                <a target="_blank" id="main_study_p3">Click to start your part 3 annotation!</a> 
                
            </tab-content>


            <tab-content title="Main Study Part 4">

                <b>Note: this is part 4 out of 5 for the current series!</b>

                <br><br>

                <a target="_blank" id="main_study_p4">Click to start your part 4 annotation!</a> 
                
            </tab-content> -->

            <tab-content title="Main Study Part 5">

                <b>Note: this is part 5 out of 5 for the current series!</b>

                <br><br>

                <a target="_blank" id="main_study_p5">Click to start your part 5 annotation!</a> 
                
            </tab-content>


            <tab-content title="Optional Feedback">
                <div class="container card mb-3 card-body" id="bodyFeedback">
  
                    <!--Motivation text -->
                    <p class="mt0 f2 b">Optional Feedback</p>

                    <p class=" lh-copy f4">
                        If you have any feedback about improving this task, you can let
                        us know here! Completely optional / not required.
                    </p>
                    <textarea id="feedback" name="feedback" class="mf-textarea" rows="5" cols="90"></textarea>

                    <button class="button button3" id="firestore_submit_single" style="margin: 10px 0; float: right">
                        Submit your feedback
                    </button>


                </div>

            </tab-content>


        </form-wizard>
    </div>

</body>
<script src="../js/qual.js"></script>


<script>
    function myFunction() {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const prolific_id = urlParams.get('PROLIFIC_PID');
        const study_id = urlParams.get('STUDY_ID');
        const session_id = urlParams.get('SESSION_ID');
        document.getElementById("pro-id-input").value = prolific_id;
        document.getElementById("sty-id-input").value = study_id;
        document.getElementById("ses-id-input").value = session_id;
    };
    window.onload = myFunction;
</script>

<script>
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const prolific_id = urlParams.get('PROLIFIC_PID');
    const study_id = urlParams.get('STUDY_ID');
    const session_id = urlParams.get('SESSION_ID');

    var p1 = "", p2 = "", p3 = "";
    
    // let main_url_1 = "https://jonathanqzheng1.github.io/qual/main_p1.html?PROLIFIC_PID=" + prolific_id + "&STUDY_ID=" + study_id + "&SESSION_ID=" + session_id;
       
    // let main_url_2 = "https://jonathanqzheng1.github.io/qual/main_p2.html?PROLIFIC_PID=" + prolific_id + "&STUDY_ID=" + study_id + "&SESSION_ID=" + session_id;

    // let main_url_3 = "https://jonathanqzheng1.github.io/qual/main_p3.html?PROLIFIC_PID=" + prolific_id + "&STUDY_ID=" + study_id + "&SESSION_ID=" + session_id;

    // let main_url_4 = "https://jonathanqzheng1.github.io/qual/main_p4.html?PROLIFIC_PID=" + prolific_id + "&STUDY_ID=" + study_id + "&SESSION_ID=" + session_id;

    let main_url_5 = "https://jonathanqzheng1.github.io/qual/main_p5.html?PROLIFIC_PID=" + prolific_id + "&STUDY_ID=" + study_id + "&SESSION_ID=" + session_id;
    
    // let main_study_p1 = document.getElementById("main_study_p1");
    // main_study_p1.href = main_url_1;

    // let main_study_p2 = document.getElementById("main_study_p2");
    // main_study_p2.href = main_url_2;

    // let main_study_p3 = document.getElementById("main_study_p3");
    // main_study_p3.href = main_url_3;

    // let main_study_p4 = document.getElementById("main_study_p4");
    // main_study_p4.href = main_url_4;

    let main_study_p5 = document.getElementById("main_study_p5");
    main_study_p5.href = main_url_5;
    
</script>

<style>
    .button {
      background-color: #4CAF50; /* Green */
      border: none;
      color: white;
      padding: 16px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      transition-duration: 0.4s;
      cursor: pointer;
    }
    
    .button3 {
      background-color: white; 
      color: black; 
      border: 2px solid #d65745;
      border-radius: 12px
    }
    
    .button3:hover {
      background-color: #d65745;
      color: white;
      border-radius: 12px
    }

</style>


<script type="module">
    // Import the functions you need from the SDKs you need
    // import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
    import { getDatabase, ref, set, push, child } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js";
    import { getFirestore, collection, addDoc, doc, setDoc, updateDoc, arrayUnion, getDoc } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-firestore.js";

    const firebaseConfig = {
          apiKey: "AIzaSyAj1teyQbe0ZA75eZI4aFN8dlMXVFig90U",
          authDomain: "mt-translation-f3caa.firebaseapp.com",
          projectId: "mt-translation-f3caa",
          storageBucket: "mt-translation-f3caa.appspot.com",
          messagingSenderId: "1057495167441",
          appId: "1:1057495167441:web:4be1d27db29b9a631670f0",
          measurementId: "G-J4MKPJD5BK"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const could_firestore = getFirestore(app);
    const realtime_db = getDatabase(app);


    firestore_submit_single.addEventListener("click", (e) => {

        const prolific_id = document.getElementById("pro-id-input").value
        
        setDoc(doc(could_firestore, "Users", prolific_id), {
            prolific_id: prolific_id,
            study_id: document.getElementById("sty-id-input").value,
            session_id: document.getElementById("ses-id-input").value,
            feedback: document.getElementById("feedback").value,
        }).then(() => {
            alert("The data annotation has been submitted. Now you can close the window. Thank you for your participation!");
        })
        .catch((error) => {
            alert("Error occurred");
        });

    });

</script>

</html>
